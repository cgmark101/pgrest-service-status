<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Service Status</title>
</head>
<body>
    <h1>Service Status</h1>
    <table>
        <tr>
            <th>Service Name</th>
            <th>Status</th>
        </tr>
        <tr>
            <td>postgrest.admision.service</td>
            <td><span id="status-admision">Loading...</span></td>
        </tr>
        <tr>
            <td>postgrest.cc2000.service</td>
            <td><span id="status-cc2000">Loading...</span></td>
        </tr>
        <tr>
            <td>postgrest.comedor.service</td>
            <td><span id="status-comedor">Loading...</span></td>
        </tr>
        <tr>
            <td>postgrest.dacepro.service</td>
            <td><span id="status-dacepro">Loading...</span></td>
        </tr>
        <tr>
            <td>postgrest.dacepto.service</td>
            <td><span id="status-dacepto">Loading...</span></td>
        </tr>
        <tr>
            <td>postgrest.diplomad.service</td>
            <td><span id="status-diplomad">Loading...</span></td>
        </tr>
        <tr>
            <td>postgrest.fdocente.service</td>
            <td><span id="status-fdocente">Loading...</span></td>
        </tr>
        <tr>
            <td>postgrest.helpdesk.service</td>
            <td><span id="status-helpdesk">Loading...</span></td>
        </tr>
        <tr>
            <td>postgrest.ningreso.service</td>
            <td><span id="status-ningreso">Loading...</span></td>
        </tr>
        <tr>
            <td>postgrest.postgrad.service</td>
            <td><span id="status-postgrad">Loading...</span></td>
        </tr>
        <tr>
            <td>postgrest.solic.service</td>
            <td><span id="status-solic">Loading...</span></td>
        </tr>
        <tr>
            <td>postgrest.solicita.service</td>
            <td><span id="status-solicita">Loading...</span></td>
        </tr>
        <tr>
            <td>postgrest.tgpp.service</td>
            <td><span id="status-tgpp">Loading...</span></td>
        </tr>
        <tr>
            <td>postgrest.userdoc.service</td>
            <td><span id="status-userdoc">Loading...</span></td>
        </tr>
        <tr>
            <td>postgrest.usersdb.service</td>
            <td><span id="status-usersdb">Loading...</span></td>
        </tr>
        <tr>
            <td>postgrest.usuarios.service</td>
            <td><span id="status-usuarios">Loading...</span></td>
        </tr>
    </table>
    <script>
        function updateStatus(serviceName, elementId) {
            fetch(`/status/${serviceName}`)
            .then(response => response.json())
            .then(data => {
                const statusSpan = document.getElementById(elementId);
                if (data.status.includes("active (running)")) {
                    statusSpan.innerText = "Running";
                    statusSpan.style.color = "green";
                } else if (data.status.includes("inactive (dead)")) {
                    statusSpan.innerText = "Stopped";
                    statusSpan.style.color = "red";
                } else {
                    statusSpan.innerText = "Error";
                    statusSpan.style.color = "orange";
                }
            })
            .catch(error => {
                const statusSpan = document.getElementById(elementId);
                statusSpan.innerText = "Error";
                statusSpan.style.color = "orange";
            });
        }
        updateStatus("admision", "status-admision");
        updateStatus("cc2000", "status-cc2000");
        updateStatus("comedor", "status-comedor");
        updateStatus("dacepro", "status-dacepro");
        updateStatus("dacepto", "status-dacepto");
        updateStatus("diplomad", "status-diplomad");
        updateStatus("fdocente", "status-fdocente");
        updateStatus("helpdesk", "status-helpdesk");
        updateStatus("ningreso", "status-ningreso");
        updateStatus("postgrad", "status-postgrad");
        updateStatus("solic", "status-solic");
        updateStatus("solicita", "status-solicita");
        updateStatus("tgpp", "status-tgpp");
        updateStatus("userdoc", "status-userdoc");
        updateStatus("usersdb", "status-usersdb");
        updateStatus("usuarios", "status-usuarios");
        <!-- add more services here -->
    </script>
</body>
</html>
